<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Heirloom Demo</title>
  <meta name="description" content="Heirloom interactive preview — ask a question and see a sample response." />
  <style>
    :root { --radius: 16px; }
    * { box-sizing: border-box; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin:0; color:#111; background:#fff; }
    .wrap { max-width: 900px; margin: 0 auto; padding: 48px 20px; }
    a { color: inherit; }
    .crumbs { font-size: 14px; color:#666; margin-bottom: 18px; }
    h1 { font-size: 36px; margin: 0 0 8px; }
    p.lead { color:#444; margin:0 0 20px; }
    .card { border:1px solid #eee; border-radius: var(--radius); padding: 20px; }
    .row { display:flex; gap:10px; align-items:center; }
    textarea { width:100%; min-height: 90px; padding:12px 14px; font-size:16px; border:1px solid #ddd; border-radius: 10px; }
    button { padding: 12px 16px; font-size: 16px; border:0; border-radius:10px; background:#111; color:#fff; cursor:pointer; }
    button[disabled] { opacity:.5; cursor:not-allowed; }
    .out { border:1px solid #eee; border-radius: var(--radius); padding:16px; min-height: 140px; background:#fafafa; white-space: pre-wrap; line-height:1.4; }
    .muted { color:#666; font-size:14px; }
    .spinner { display:inline-block; width:16px; height:16px; border:2px solid #999; border-top-color: transparent; border-radius:50%; animation: spin 1s linear infinite; vertical-align: middle; margin-left:8px; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .examples { display:flex; flex-wrap:wrap; gap:8px; margin-top:10px; }
    .chip { border:1px solid #ddd; border-radius:999px; padding:6px 10px; font-size:14px; cursor:pointer; }
    footer { margin-top:28px; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="crumbs"><a href="/">← Back</a></div>
    <h1>Heirloom — Interactive Preview</h1>
    <p class="lead">Ask a sample question. This demo simulates how Heirloom will recall moments and generate narrative from your family’s data.</p>

    <div class="card" style="margin:16px 0;">
      <div class="row">
        <textarea id="q" placeholder="e.g., Summarize our 2020 summer road trip with highlights."></textarea>
      </div>
      <div class="examples">
     <span class="chip" data-q="Show me my life milestones">Life milestones</span>
     <span class="chip" data-q="Tell me about birthdays over the years">Birthday memories</span>
     <span class="chip" data-q="Summarize my last vacation">Vacation story</span>
     <span class="chip" data-q="Create a family narrative">Family narrative</span>
   </div>

      <div class="row" style="margin-top:10px; justify-content:space-between;">
        <span class="muted">Demo only — sample output.</span>
        <button id="go">Generate Preview</button>
      </div>
    </div>

    <div class="out" id="out">Your preview will appear here.</div>

    <footer class="muted">© <span id="y"></span> Heirloom — Demo</footer>
  </div>

  <script>
    const y = document.getElementById('y'); y.textContent = new Date().getFullYear();
    const q = document.getElementById('q');
    const out = document.getElementById('out');
    const go = document.getElementById('go');

    const samples = {
  "milestones": `**Life Milestones (Sample Output)**
• 2015 — Moved into a new apartment, first big city job.  
• 2018 — Graduation photos; video of family cheering.  
• 2021 — New home purchase; housewarming party.  
• 2023 — Big trip abroad; 200+ photos clustered.  

**Summary:** Heirloom ties these milestones into a timeline so they’re never forgotten.`,
  
  "birthday": `**Birthday Memories (Sample Output)**
1) 2010 — Surprise party at a local park.  
2) 2016 — Homemade cake with friends singing.  
3) 2022 — Restaurant dinner with a slideshow of photos.  

**Why it matters:** Heirloom collects recurring events across the years and shows how traditions evolve.`,
  
  "vacation": `**Vacation Story (Sample Output)**
Day 1 — Arrival snapshots at the airport.  
Day 3 — Beach photos auto-tagged with “sunset.”  
Day 5 — Journal entry about trying new foods.  

**Summary:** The trip becomes a chapter with highlights and a curated gallery.`,
  
  "general": `**Family Narrative (Sample Output)**
Heirloom scans your journals, photos, and notes to generate a chapter of your story. It links images, voice notes, and events into a narrative you can revisit or share.  

_Tip:_ Try asking for a “timeline,” a “story,” or a “summary” for different flavors of output.`
};

    const pickSample = (txt) => {
      txt = (txt || "").toLowerCase();
      if (txt.includes("road") || txt.includes("trip")) return samples.road;
      if (txt.includes("koko")) return samples.koko;
      if (txt.includes("buck")) return samples.buck;
      if (txt.includes("milestone") || txt.includes("timeline")) return samples.milestones;
      // Default narrative
      return `**Heirloom Preview**
I’ll scan your journals, photos, voice notes, and events to assemble a clean summary with citations back to the original memories. This interactive preview demonstrates the tone and structure of responses you can expect.

_Tip:_ Ask for a “timeline,” a “story,” or a “summary,” and reference names (e.g., Koko, Buck) for richer results.`;
    };

    function renderMarkdown(md) {
      // Minimal markdown: bold **text** and line breaks
      return md
        .replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>')
        .replace(/\n/g, '<br/>');
    }

    function sleep(ms){ return new Promise(r => setTimeout(r, ms)); }

    async function simulate() {
      const text = q.value.trim();
      if (!text) { q.focus(); return; }
      go.disabled = true;
      const original = go.textContent;
      go.textContent = 'Generating';
      go.insertAdjacentHTML('beforeend', '<span class="spinner"></span>');

      // fake thinking
      await sleep(700);
      let answer = pickSample(text);

      // fake token stream
      out.innerHTML = '';
      const tokens = answer.split(' ');
      for (let i = 0; i < tokens.length; i++) {
        out.innerHTML += tokens[i] + ' ';
        await sleep(12 + Math.random() * 18);
      }
      out.innerHTML = renderMarkdown(out.textContent);

      go.disabled = false;
      go.textContent = original;
    }

    go.addEventListener('click', simulate);
    document.querySelectorAll('.chip').forEach(chip => {
      chip.addEventListener('click', () => { q.value = chip.dataset.q; });
    });
  </script>
</body>
</html>
